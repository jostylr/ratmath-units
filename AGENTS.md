# Repository Guidelines

## Project Structure & Module Organization
- `src/`: TypeScript ESM source.
  - `core/Unit.ts`: main `Unit` class and arithmetic.
  - `parser/unitString.ts`: parses strings like `m^2/s*kg` → unit maps.
  - `registries/{sci,alg,sym}.ts`: registries for scientific, algebraic, symbolic factors.
  - `index.ts` and `types.ts`: public exports and shared types/adapters.
- `tests/`: Bun tests (e.g., `basic.test.ts`).
- `design/`: design notes and API sketches.
- `dist/`: build output (generated by `build`).

## Build, Test, and Development Commands
- `bun run build`: Compile TypeScript to ESM in `dist/`.
- `bun test`: Run unit tests with Bun’s test runner.
- `bun run clean`: Remove `dist/`.
- Requirements: Bun >= 1.0, Node >= 18 (ESM). Configure via `tsconfig.json` and `bunfig.toml`.

## Coding Style & Naming Conventions
- Language: TypeScript, strict mode; ESM `import`/`export` only.
- Indentation: 2 spaces; use double quotes and semicolons.
- Names: `PascalCase` for classes (`Unit`), `camelCase` for functions/vars (`parseUnitString`).
- Files: module utilities in `lowerCamel` (e.g., `unitString.ts`); single-class files may use `PascalCase` (e.g., `Unit.ts`).
- Adapters: prefer pure functions; avoid side effects in `src/` except explicit registries.

## Testing Guidelines
- Framework: `bun:test` (`describe`, `it`, `expect`).
- Location/pattern: `tests/*.test.ts`.
- Run: `bun test` (optionally with Bun flags like `--watch`).
- Add focused, deterministic tests; follow existing patterns (e.g., stringifying units via `String(unit)`). Coverage thresholds are not enforced yet.

## Commit & Pull Request Guidelines
- Commits: short, imperative subject; explain the “why” in body when useful.
  - Example: `Add pow() handling for negative exponents`.
- PRs: include purpose, key changes, and impact; link issues; add/adjust tests; update docs (`README.md`, `design/`) when behavior changes; include usage notes or screenshots if relevant.
- Scope: keep PRs small and cohesive; prefer incremental changes.

## Security & Config Tips
- No secrets or network calls in library code; keep modules pure and side-effect free.
- Avoid new runtime deps without discussion; prefer zero-dependency utilities.
- Environment: none required at runtime; build targets ESM in `dist/`.

